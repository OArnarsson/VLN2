@model IEnumerable<Coder.Models.ViewModels.GradeTaskViewModel>
@{
    ViewBag.Title = "Grades";
    var projectTaskId = ViewBag.ProjectTaskId;
}

@section heading {
    <h1>Grades</h1>
}

@section breadcrumbs {
    <ul>
        <li>@Html.ActionLink("Coder", "Index", "Home")</li>
        <li>@Html.ActionLink("Tasks", "Index", "ProjectTasks")</li>
        <li>@Html.ActionLink("Grades", "GradeTask", "ProjectTasks")</li>
    </ul>
}

<div class="whiteBox">
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <input type="hidden" name="projectTaskId" value="@projectTaskId"/>
    <table class="stripe coder-table coder-datatable">
        <thead>
            <tr>
                <th>User</th>
                <th>Submission</th>
                <th>Grade</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.ApplicationUser.Name</td>
                    <td>
                    @if (item.Submission != null)
                    {
                        @Html.ActionLink("#" + item.Submission.Id, "Details", "Submissions", new { Id = item.Submission.Id }, null)
                    }
                    else
                    {
                        <span>-</span>
                    }
                    </td>
                    @{
                        var value = 0;
                        if (item.GradeProjectTask != null)
                        {
                            value = item.GradeProjectTask.Grade;
                        }
                    }
                    <td>
                        <input class="form-control" name="grade_@item.ApplicationUser.Id" type="number" step="1" min="0" max="100" value="@value"/>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <input type="submit" value="Save" class="btn btn-default" />
}

</div>