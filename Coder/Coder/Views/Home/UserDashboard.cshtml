@{
    ViewBag.Title = "Dashboard";
}

@model Coder.Models.ViewModels.DashboardViewModel

<div class="dashboard">
    <div class="title-box">
        <div class="title-box-title">
            <h3>Ongoing Projects</h3>
        </div>
        <div class="title-box-content">
                @if (Model.OngoingProjects.Count == 0)
                {
                    <div class="alert alert-info">You have no ongoing projects.</div>
                }
                else
                {
                    foreach (var item in Model.OngoingProjects)
                    {
                        <a href="@Url.Action("Details", "Projects", new { id=item.Id })">
                            <div>
                                <h4>@item.Name</h4>
                                <span class="course">@item.Course.Title</span>

                                <p id="endDate">
                                    @item.End.ToString("dddd, d MMM") &nbsp;'@item.End.ToString("yy")<br>
                                    @item.End.ToString("HH:mm")
                                </p>
                            </div>
                        </a>
                    }
                }
        </div>
    </div>

    <div class="title-box">
        <div class="title-box-title">
            <h3>Previous projects</h3>
        </div>
        <div class="title-box-content">
            <table class="table coder-table">
                <thead>
                    <tr>
                        <th>Project Name</th>
                        <th>Course</th>
                        <th>Grade</th>
                    </tr>
                </thead>

                <tbody>
                    @*
    @foreach (var project in Model.ExpiredProjects)
    {
        <tr>
            <td>@Html.ActionLink(project.Name.ToString(), "Details", "Projects", new { id = project.Id }, null)</td>
            <td>@Html.ActionLink(project.Course.Name.ToString(), "Details", "Courses", new { id = project.Course.Id }, null)</td>
            <td>@project.Value/100</td>
        </tr>
    }*@
                </tbody>
            </table>
        </div>
    </div>

    <div class="title-box">
        <div class="title-box-title">
            <h3>Recent submissions</h3>
        </div>
        <div class="title-box-content">
            <table class="recentSubs table coder-table">
                <thead>
                    <tr>
                        <th>Submission</th>
                        <th>Task</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var submission in Model.Submissions.Take(6))
                    {
                        <tr>
                            <td>@Html.ActionLink(submission.Id.ToString(), "Details", "Submissions", new { id = submission.Id }, null)</td>
                            <td>@Html.ActionLink(submission.ProjectTask.Name, "Details", "ProjectTasks", new { id = submission.ProjectTaskId }, null)</td>
                            <td>@submission.Status</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
